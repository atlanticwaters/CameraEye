// Generated by font-packager-ios.js
// Do not edit manually

import Foundation
import SwiftUI
import CoreText

/// Font registration helper for custom fonts bundled with the Design System.
///
/// Call `DSFontRegistration.registerFonts()` once during app launch to register
/// all custom fonts. This is required for fonts to be available via `Font.custom()`.
///
/// ## Example
/// ```swift
/// @main
/// struct MyApp: App {
///     init() {
///         DSFontRegistration.registerFonts()
///     }
///
///     var body: some Scene {
///         WindowGroup {
///             ContentView()
///         }
///     }
/// }
/// ```
public enum DSFontRegistration {
    /// Fonts included in this bundle
    private static let fontNames: [String] = [
        "THD LgVar Beta",
        "THD SmVar Beta"
    ]
    
    /// Whether fonts have been registered
    private static var isRegistered = false
    
    /// Register all bundled fonts with the system.
    ///
    /// Safe to call multiple times - will only register once.
    public static func registerFonts() {
        guard !isRegistered else { return }
        
        for fontName in fontNames {
            registerFont(named: fontName)
        }
        
        isRegistered = true
    }
    
    /// Register a single font by name
    private static func registerFont(named fontName: String) {
        guard let fontURL = Bundle.module.url(
            forResource: fontName,
            withExtension: "ttf",
            subdirectory: "Fonts"
        ) else {
            // TODO(FONTS): This warning is expected in CI until font files are obtained from Brand team.
            // See assets/fonts/README.md for setup instructions.
            #if DEBUG
            print("[DSFontRegistration] Warning: Font file not found: \(fontName).ttf")
            #endif
            return
        }
        
        var errorRef: Unmanaged<CFError>?
        if !CTFontManagerRegisterFontsForURL(fontURL as CFURL, .process, &errorRef) {
            #if DEBUG
            if let error = errorRef?.takeRetainedValue() {
                print("[DSFontRegistration] Error registering \(fontName): \(error)")
            }
            #endif
        }
    }
}

// MARK: - Font Family Constants

public extension DSFontRegistration {
    /// THD LgVar Beta
    static let tHDLgVarBeta = "THD LgVar Beta"

    /// THD SmVar Beta
    static let tHDSmVarBeta = "THD SmVar Beta"
}
